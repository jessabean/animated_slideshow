// Slideshow Animation
// ---------------------------------------

// Variables for the slideshow animation
$images:  4;
$slide-duration: 3;
$slide-transition-duration: 1;
$total-slideshow-duration: ($slide-duration + $slide-transition-duration) * $images;

// Hat tip: http://css3.bradshawenterprises.com/cfimg/
// Set up formulas for each keyframe
$keyframe-1: percentage(0);
$keyframe-2: floor(percentage($slide-duration / $total-slideshow-duration));
$keyframe-3: floor(percentage(($slide-duration + $slide-transition-duration) / $total-slideshow-duration));
$keyframe-4: floor(100 - percentage($slide-transition-duration / $total-slideshow-duration));
$keyframe-5: percentage(100);

// Define keyframes for slideshow animation
@include keyframes(slideshow) {
  #{$keyframe-1} {
   opacity:1;
  }
  #{$keyframe-2} {
   opacity:1;
  }
  #{$keyframe-3} {
   opacity:0;
  }
  #{$keyframe-4} {
   opacity:0;
  }
  100% {
   opacity:1;
  }
}

// Cursor Animation
// ---------------------------------------
// Positions:
// 20px 20px
// 125px 385px
// 310px 248px
// 525px 274px
// 525px 436px

@include keyframes(cursor) {
  0% {
    left: 20px;
    top: 20px;
  }
  12% {
    left: 125px;
    top: 385px;
  }
  28% {
    left: 125px;
    top: 385px;
  }
  35% {
    left: 310px;
    top: 248px;
  }
  50% {
    left: 310px;
    top: 248px;
  }
  56% {
    left: 525px;
    top: 274px;
  }
  62% {
    left: 525px;
    top: 274px;
  }
  84% {
    left: 525px;
    top: 436px;
  }
  100% {
    left: 525px;
    top: 436px;
  }
}

// Setting z-index for each feature item
// Can set any other iteration-based styles too
// ---------------------------------------
$i: 4; // Number of slides in list
$index-start: $i + 1;

@while $i > 0 {
  $index: $index-start - $i;

  .item-#{$i} {
    z-index: $index;
  }

  $i: $i - 1;
}

// Okay, okay some actual styles
// ---------------------------------------
.feature-list {
  margin: 20px auto;
  position: relative;
    height: 456px;
    width: 640px;
}

// Animation shorthand for forgetful Jess:
// name, duration, timing function, delay, iteration count, direction
.feature-item {
  @include animation(slideshow 12s ease-in-out 0 infinite);
  position: absolute;
    left: 0;

  &.item-1 {
    @include animation-delay(0);
  }
  &.item-2 {
    @include animation-delay(3s);
  }
  &.item-3 {
    @include animation-delay(6s);
  }
  &.item-4 {
    @include animation-delay(9s);
  }
}

.cursor {
  @include transition(all 2s ease-in-out);
  @include animation(cursor 12s ease-in-out 0 infinite);
  background: #444;
  border: 2px solid #bbb;
  border-radius: 50%;
  display: block;
    height: 16px;
    width: 16px;
  position: absolute;
    left: 10px;
    top: 10px;
  z-index: 100;
}